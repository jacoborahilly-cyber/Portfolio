<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Interactive Canvas Portfolio</title>
    <style>
        /* CSS from previous steps */
        body { 
            overflow: hidden; 
            margin: 0; 
            padding: 0; 
            background-color: #121212; 
            font-family: Arial, sans-serif; 
            color: #E0E0E0;
            /* Cursor is no longer hidden as mouse movement is not used for panning */
        }

        #world { 
            position: absolute; 
            width: 5000px;      
            height: 5000px;     
            top: 0; 
            left: 0;
            background: 
                repeating-linear-gradient(0deg, #333 0, #333 1px, transparent 1px, transparent 100px),
                repeating-linear-gradient(-90deg, #333 0, #333 1px, transparent 1px, transparent 100px);
            background-size: 100px 100px;
        }
        
        .content-area, .room-content { 
            position: absolute; 
            width: 1000px;
            min-height: 700px;
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7); 
            color: #121212;
        }
        
        /* Placeholder style for project images */
        .project-placeholder {
            width: 600px;
            height: 400px;
            background-color: #555555; 
            border: 2px dashed #121212;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #E0E0E0;
            text-align: center;
            float: left; 
            margin-right: 30px;
        }

        /* Room Styles */
        #Room-Design { top: 500px; left: 500px; background-color: #FF5A5F; }
        #Room-Code { top: 3500px; left: 3500px; background-color: #1ABC9C; }
        #Room-About { top: 2500px; left: 500px; background-color: #F39C12; }
        
        /* Instruction Panel CSS (New) */
        #instruction-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 40px;
            background-color: rgba(255, 255, 255, 0.95);
            color: #121212;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }

        .hidden {
            opacity: 0 !important;
            pointer-events: none; /* Allows clicks to pass through after fade */
        }
    </style>
</head>
<body>

    <div id="instruction-popup">
        Use **WASD** or **Arrow Keys** to explore the portfolio!
    </div>

    <div id="world">
        <section id="Room-Design" class="room-content">
            <h2>ðŸŽ¨ Design Room</h2>
            <p>This space is dedicated to my **UX/UI case studies**, branding projects, and visual design work.</p>
            <h3>Creative Design Showcase</h3>
            <div class="project-placeholder">Project 1 Placeholder (600px x 400px)</div>
            <div class="project-placeholder">Project 2 Placeholder (600px x 400px)</div>
            <div style="clear: both;"></div>
            <p>Coordinates: (500px, 500px)</p>
        </section>

        <section id="Room-Code" class="room-content">
            <h2>ðŸ’» Code Room</h2>
            <p>Here you can find my **front-end development** projects, focusing on responsive layouts, JavaScript, and performance.</p>
            <h3>Technical Projects</h3>
            <ul>
                <li>**GitHub API Fetcher:** A tool to display repository activity and statistics.</li>
                <li>**Interactive Data Visualization:** A project using D3.js to render complex data sets.</li>
                <li>**AI-Generated Art Tool:** A fun front-end interface for controlling a generative art backend.</li>
            </ul>
            <p>Coordinates: (3500px, 3500px)</p>
        </section>

        <section id="Room-About" class="room-content"><h2>ðŸ‘¤ About Room</h2><p>Learn more about **who I am**, my skills, experience, and contact information.</p><p>Coordinates: (2500px, 500px)</p></section>

    </div>

    <script>
        const world = document.getElementById('world');
        const instructionPopup = document.getElementById('instruction-popup');
        
        // Target position (where the canvas *should* move to)
        let targetX = 0;
        let targetY = 0;

        // Current position and velocity (for spring physics)
        let currentX = 0;
        let currentY = 0;
        let velocityX = 0;
        let velocityY = 0;
        
        // Spring Physics Constants
        const stiffness = 0.05; 
        const damping = 0.95;   

        // Key movement variables
        const keyMap = {}; // Tracks which keys are currently held down
        const moveSpeed = 10; // How fast the target moves per frame when a key is pressed

        // --- 1. Keyboard Event Listeners ---
        const movementKeys = ['KeyW', 'KeyA', 'KeyS', 'KeyD', 'ArrowUp', 'ArrowLeft', 'ArrowDown', 'ArrowRight'];

        window.addEventListener('keydown', (e) => {
            if (movementKeys.includes(e.code)) {
                keyMap[e.code] = true;
                e.preventDefault(); // Prevent browser scrolling
                hideInstructions(); // Hide the popup on the first movement key press
            }
        });

        window.addEventListener('keyup', (e) => {
            if (movementKeys.includes(e.code)) {
                keyMap[e.code] = false;
            }
        });

        // --- 2. Instruction Pop-up Logic ---
        function hideInstructions() {
            if (!instructionPopup.classList.contains('hidden')) {
                instructionPopup.classList.add('hidden');
            }
        }

        // Hide after 4 seconds (timeout)
        setTimeout(hideInstructions, 4000); 

        // --- 3. Animation Loop (Updated to handle key inputs) ---
        function animate() {
            // Check key presses and update target position
            if (keyMap['KeyA'] || keyMap['ArrowLeft']) {
                // Moving Left: Decrease X (Canvas moves to the right)
                targetX += moveSpeed;
            }
            if (keyMap['KeyD'] || keyMap['ArrowRight']) {
                // Moving Right: Increase X (Canvas moves to the left)
                targetX -= moveSpeed;
            }
            if (keyMap['KeyW'] || keyMap['ArrowUp']) {
                // Moving Up: Decrease Y (Canvas moves down)
                targetY += moveSpeed;
            }
            if (keyMap['KeyS'] || keyMap['ArrowDown']) {
                // Moving Down: Increase Y (Canvas moves up)
                targetY -= moveSpeed;
            }

            // Spring Physics Logic (Unchanged)
            const dx = targetX - currentX;
            const dy = targetY - currentY;

            const springForceX = dx * stiffness;
            const springForceY = dy * stiffness;

            velocityX += springForceX;
            velocityY += springForceY;

            velocityX *= damping;
            velocityY *= damping;

            currentX += velocityX;
            currentY += velocityY;

            // Apply the new position
            world.style.transform = `translate3d(${Math.round(currentX)}px, ${Math.round(currentY)}px, 0)`;

            window.requestAnimationFrame(animate);
        }

        // Start the animation loop
        animate();
    </script>
    
</body>
</html>
